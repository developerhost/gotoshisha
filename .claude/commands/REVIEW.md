# GitHub プルリクエスト レビューコマンド

## 概要

指定された GitHub プルリクエスト番号に対して、コードレビューを実行するカスタムコマンドです。

## 使用方法

```
/review <PR番号>
```

例：

```
/review 123
```

## 機能

このコマンドは以下の包括的なレビューを実行します：

### 1. プルリクエスト情報の取得

- プルリクエストの詳細情報を取得
- 変更されたファイル一覧の確認
- 変更内容の差分確認

### 2. コード品質チェック

- **TypeScript 型チェック**: 型安全性の確認
- **ESLint チェック**: コーディング規約の遵守確認
- **テスト実行**: 既存テストの通過確認
- **セキュリティチェック**: 潜在的なセキュリティ問題の確認

### 3. アーキテクチャレビュー

- **設計パターン**: 既存のアーキテクチャとの整合性
- **パフォーマンス**: 潜在的なパフォーマンス問題
- **保守性**: コードの可読性と保守性の評価

### 4. プロジェクト固有チェック

- **Gotoshisha プロジェクト規約**: CLAUDE.md に定義された規約の遵守
- **React Native/Expo**: クロスプラットフォーム対応の確認
- **Tamagui**: UI コンポーネントの適切な使用
- **認証フロー**: Auth0 実装の適切性

### 5. レビューレポート生成

以下の形式でレビュー結果を出力：

```
## 📋 プルリクエスト レビュー結果

### 基本情報
- **PR番号**: #123
- **タイトル**: 機能追加
- **作成者**: @username
- **変更ファイル数**: 5個

### ✅ 品質チェック結果
- [ ] TypeScript型チェック
- [ ] ESLintチェック
- [ ] テスト実行
- [ ] セキュリティチェック

### 🏗 アーキテクチャ評価
- **設計パターン**: 良好
- **パフォーマンス**: 問題なし
- **保守性**: 改善提案あり

### 📝 詳細レビューコメント

#### 👍 良い点
- 適切なTypeScript型定義の使用
- テストカバレッジの向上

#### ⚠️ 改善提案
- [ファイル名:行番号] 具体的な改善提案
- パフォーマンス最適化の余地

#### 🚨 修正必須項目
- セキュリティ上の問題
- 型安全性の問題

### 📊 総合評価
**スコア**: 85/100
**推奨アクション**: マージ前に軽微な修正を推奨
```

## 実行される処理フロー

1. **GitHub API 呼び出し**

   ```bash
   gh pr view <PR番号> --json title,author,files,additions,deletions
   gh pr diff <PR番号>
   ```

2. **静的解析実行**

   ```bash
   pnpm type-check
   pnpm lint
   pnpm test:run
   ```

3. **変更ファイル解析**

   - 変更されたファイルの詳細読み込み
   - 差分内容の詳細分析
   - 影響範囲の評価

4. **プロジェクト規約チェック**

   - CLAUDE.md の規約遵守確認
   - コード生成規約の確認
   - テスト規約の確認

5. **総合レビュー**
   - 全ての分析結果を統合
   - 優先度付きのフィードバック生成
   - アクションアイテムの提案

## 注意事項

- GitHub CLI がインストール・設定済みである必要があります
- プルリクエストが存在しない場合はエラーメッセージを表示します
- 大量の変更がある場合、レビューに時間がかかる場合があります

## 対応プロジェクト

このコマンドは Gotoshisha プロジェクト専用に最適化されており、以下の技術スタックに対応しています：

- **フロントエンド**: React Native + Expo + TypeScript
- **UI**: Tamagui
- **バックエンド**: Cloudflare Workers + Hono
- **データベース**: Prisma + D1
- **認証**: Auth0
- **テスト**: Vitest
- **品質管理**: ESLint + TypeScript
